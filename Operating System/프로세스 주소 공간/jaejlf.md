# 📍 프로세스 주소 공간

![image](https://user-images.githubusercontent.com/78673570/183255132-1187ea7f-9f0d-4b29-9370-248136b929e2.png)

프로세스가 메모리를 할당받으면, 자신만의 방법으로 이 공간을 `프로세스 주소 공간`의 구조로 관리한다.

<br>

## Stack 영역

- 함수의 호출과 관계되는 `지역 변수`, `매개 변수`가 저장되는 영역이다.
- 함수의 호출과 함께 할당되며, 함수의 호출이 완료되면 소멸한다.
- 메모리의 `높은 주소에서 낮은 주소의 방향`으로 할당된다.
- 재귀 함수가 너무 깊게 호출되거나 함수가 지역변수를 너무 많이 가지고 있어 스택 영역을 초과하면 `stack overflow` 에러가 발생한다.

<br>

## Heap 영역

- 런타임에 크기가 결정되는 영역이다.
- 사용자에 의해 공간이 동적으로 할당 및 해제된다.
- 주로 참조형 데이터 (ex. 클래스) 등의 데이터가 할당된다.
- 메모리의 `낮은 주소에서 높은 주소의 방향`으로 할당된다.

<br>

## Data 영역
- `초기화된 전역 변수`, `static 변수` 등 프로그램이 사용할 수 있는 데이터를 저장하는 영역이다.  
( `초기화되지 않은` 전역 변수의 경우 BSS 영역에 저장된다. )
- 프로그램의 시작과 함께 할당되며, 프로그램이 종료되면 소멸한다.

<br>

## Text 영역

- 기계어가 저장되어있는 영역
- 프로그램이 수정되면 안 되므로 ReadOnly 상태로 저장되어있다.

<br><br>

## 💡 Stack vs Data 영역이 분리된 이유

= `역할을 분배` 하기 위해서
= 메모리는 한정되어있기 때문에, 최대한 `메모리를 절약`하기 우해서

<br>

한 프로세스가 여러개의 스레드를 가질 때, 각각의 스레드는 자신만의 `Stack 영역`을 가진다. <br>
반면 `Data 영역`은 공유한다. 즉, 각각의 스레드가 자원을 공유함으로써 메모리를 절약할 수 있다.
