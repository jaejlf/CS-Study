# 이상(Anomaly)

## A. 이상 현상이란?

```
📖 특정 릴레이션에 대해 데이터를 조작함에 있어, 원치 않는 현상이 발생하거나 조작으로 인해서 데이터 불일치/누락이 발생하는 현상
```

<br/>

예시)
예를 들어 🔑 **{StudentID, CourseID, Department, Grade}** 로 구성된 테이블이 있다고 칩시다.

| StudentID | CourseID | Department         | Grade |
| --------- | -------- | ------------------ | ----- |
| 1812345   | 21000549 | 컴퓨터과학전공     | 4     |
| 2038153   | 21000540 | 소프트웨어융합전공 | 3     |

<br/>

### 1. **삽입 이상(insertion Anomaly)**

<br/>
    
기본키가 {StudentID, CourseID} 인 경우 Course를 수강하지 않은 학생은 Course ID가 없는 경우가 생깁니다.  결국, Course ID를 Null로 할 수 밖에 없는데, 기본키는 Null이 될 수 없으므로 테이블에 추가될 수 없습니다.
    
<br/>
        
| 1920314 | NULL | 한국어문학전공 | 4 |
| --- | --- | --- | --- |
        
굳이 삽입하기 위해서는 ‘미수강'과 같은 Course ID를 만들어야 합니다.

<br/>
        
👉 **불필요한 데이터를 추가해야 삽입할 수 있는 상황 => Insertion Anomaly**

<br/>
    
### 2. **갱신 이상(Update Anomaly)**
    
만약 어떤 학생이 전과해서 전공 {Department}가 "컴퓨터 → 피아노과" 으로 바뀌었다고 가정합시다. 
그러면 이 학생이 듣는 모든 과목에 대해 레코드가 수정되어야 합니다. 
만약 갱신이 성공적으로 이루어지지 않고 일부만 변경된다면, 학생의 전공을 제대로 파악할 수 없습니다.

<br/>

```
🤔 1812345 학생은 컴퓨터과학전공인가 피아노과인가??
```

<br/>

| StudentID | CourseID | Department         | Grade |
| --------- | -------- | ------------------ | ----- |
| 2038153   | 21000540 | 소프트웨어융합전공 | 3     |
| 1812345   | 21000549 | 컴퓨터과학전공     | 4     |
| 1812345   | 21002301 | 피아노과           | 4     |
| 1812345   | 21002931 | 피아노과           | 4     |

<br/>
    
👉**일부만 변경하여 데이터가 불일치하는 모순의 문제 => Update Anomaly**

<br/>

### 3. **삭제 이상(Deletion Anomaly)**

<br/>
    
어떤 정보를 삭제하는데, 삭제되면 안되는 다른 사실도 함께 삭제되는 경우를 말합니다.
만약 어떤 학생이 정정기간에 수업을 드랍한다고 가정합시다.
    
{StudentID, CourseID, Department, Grade}의 정보 중 CourseID를 삭제하면 
StudentID나 Department 등 학생에 대한 정보도 함께 삭제되는 문제가 생깁니다.
    
<br/>

```
🤔 21000540 Course ID를 삭제하면 그 수업만 듣는 소융 3학년 2038153 학생의 정보는 어떻게 될까?
```

| StudentID | CourseID | Department         | Grade |
| --------- | -------- | ------------------ | ----- |
| 2038153   | 21000540 | 소프트웨어융합전공 | 3     |
| 1812345   | 21000549 | 피아노과           | 4     |
| 1812345   | 21002301 | 피아노과           | 4     |
| 1812345   | 21002931 | 피아노과           | 4     |

<br/>
    
👉 **튜플 삭제로 인해 꼭 필요한 데이터까지 함께 삭제되는 문제 => Deletion Anomaly**

## B. 참고자료

🔗 [[DataBase] 이상 현상(Anomaly)이란?](https://dev-coco.tistory.com/63)
