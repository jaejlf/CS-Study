# 📍 트랜잭션 (Transaction)

- 데이터베이스의 상태를 변화시키기 해서 수행하는 작업의 단위
- 상태 변화 = SQL 질의어(SELECT, INSERT, DELETE, UPDATE)를 통해 DB에 접근하는 것

<br>

## 트랜잭션의 특징

### 원자성 (Atomicity)
1. 트랜잭션이 데이터베이스에 모두 반영되던가, 아니면 전혀 반영되지 않아야 한다.
2. 트랜잭션 내의 모든 명령은 반드시 완벽히 수행되어야 하며, 모두가 완벽히 수행되지 않고 어느하나라도 오류가 발생하면 트랜잭션 전부가 취소되어야 한다.

<br>

### 일관성 (Consistency)
1. 트랜잭션이 그 실행을 성공적으로 완료하면 언제나 일관성 있는 데이터베이스 상태로 변환한다.
2. 시스템이 가지고 있는 고정요소는 트랜잭션 수행 전과 트랜잭션 수행 완료 후의 상태가 같아야 한다.

<br>

### 독립성 (Isolation)
1. 어떤 하나의 트랜잭션이라도, 다른 트랜잭션의 연산에 끼어들 수 없다.
2. 수행 중인 트랜잭션은 완전히 완료될 때까지 다른 트랜잭션에서 수행 결과를 참조할 수 없다.

<br>

### 지속성 (Durability)
1. 트랜잭션이 성공적으로 완료됬을 경우, 결과는 영구적으로 반영되어야 한다.

<br>

## 트랜잭션 연산

- 커밋 (Commit)
  - 하나의 트랜잭션이 성공적으로 끝났고, DB가 일관성있는 상태일 때 이를 알려주기 위해 사용하는 연산
  - 결과를 최종적으로 데이터베이스에 반영하는 연산
- 롤백 (Rollback)
  - 하나의 트랜잭션 처리가 비정상적으로 종료되어 트랜잭션 원자성이 깨진 경우 사용하는 연산
  - 지금까지 실행한 연산의 결과가 취소되고 트랜잭션 수행 이전의 상태로 돌아가는 연산
  - 롤백을 하는 경우에는 해당 트랜잭션을 재시작하거나 폐기

<br>

## 트랜잭션 상태

![image](https://user-images.githubusercontent.com/78673570/192090968-3d851f31-58eb-482c-9f0f-4384baa51e0f.png)

- `활동 (Active)` : 트랜잭션이 작업을 시작하여 실행 중인 상태
- `실패 (Failed)` : 트랜잭션에 오류가 발생하여 실행이 중단된 상태
- `철회 (Aborted)` : 트랜잭션을 비정상적으로 종료하여 Rollback 연산을 수행한 상태
- `부분 완료 (Partially Committed)` : 트랜잭션의 마지막 연산까지 수행하였고 Commit연산을 수행하기 직전의 상태
- `완료 (Committed)` : 트랜잭션을 성공적으로 종료한 상태, Commit 연산을 실행한 이후의 상태
