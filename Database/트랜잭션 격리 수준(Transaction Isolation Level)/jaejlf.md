# 📍 트랜잭션 격리 수준 (Trancsaction Isolation Level)

- 트랜잭션에서 일관성 없는 데이터를 허용하도록 하는 수준
- 동시에 여러 트랜잭션이 처리될 때, 특정 트랜잭션이 다른 트랜잭션에서 변경하거나 조회하는 데이터를 볼 수 있도록 허용할지 말지를 결정하는 것

<br>

## 격리 수준 종류

### Read Uncommitted (레벨 0)

- SELECT 문장이 수행되는 동안 해당 데이터에 Shared Lock이 걸리지 않는 계층
- 트랜잭션에 처리중이거나, 아직 Commit되지 않은 데이터를 다른 트랜잭션이 읽는 것을 허용한다.
- 발생 가능한 현상 : `Dirty Read`, `Non-Repeatable Read`, `Phantom Read`

=> 데이터베이스의 일관성을 유지하는 것이 불가능하다.

<br>

### Read Committed (레벨 1)

- SELECT 문장이 수행되는 동안 해당 데이터에 Shared Lock이 걸리는 계층
- 트랜잭션이 수행되는 동안 다른 트랜잭션이 접근할 수 없어 대기한다.
- Commit이 이루어진 트랜잭션만 조회할 수 있다.
- 대부분의 SQL 서버가 Default로 사용하는 격리 수준
- 발생 가능한 현상 : `Non-Repeatable Read`, `Phantom Read`

<br>

### Repeatable Read (레벨 2)

- 트랜잭션이 완료될 때까지 SELECT 문장이 사용하는 모든 데이터에 Shared Lock이 걸리는 계층
- 트랜잭션이 범위 내에서 조회한 데이터 내용이 항상 동일함을 보장한다.
- 다른 사용자는 트랜잭션 영역에 해당되는 데이터에 대한 수정 불가능하다.
- MySQL에서 Default로 사용하는 격리 수준
- 발생 가능한 현상 : `Phantom Read`

<br>

### Serializable (레벨 3)

- 트랜잭션이 완료될 때까지 SELECT 문장이 사용하는 모든 데이터에 Shared Lock이 걸리는 계층
- 완벽한 읽기 일관성 모드를 제공한다.
- 다른 사용자는 트랜잭션 영역에 해당되는 데이터에 대한 수정 및 입력 불가능하다.

.
<br>
.

<br>

💡 발생 가능한 현상

- `Dirty Read` : 어떤 트랜잭션에서 아직 실행이 끝나지 않은 다른 트랜잭션에 의한 변경사항을 보게되는 경우
- `Non-Repeatable Read` : 한 트랜잭션에서 같은 쿼리를 두 번 수행할 때 그 사이에 다른 트랜잭션 값을 수정 또는 삭제하면서 두 쿼리의 결과가 상이하게 나타나는 일관성이 깨진 현상
- `Phantom Read` : 한 트랜잭션 안에서 일정 범위의 레코드를 두 번 이상 읽었을 때, 첫번째 쿼리에서 없던 레코드가 두번째 쿼리에서 나타나는 현상
