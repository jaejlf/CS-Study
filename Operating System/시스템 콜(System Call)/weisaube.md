# 시스템 콜(System Call)

> 운영 체제의 커널이 제공하는 서비스에 대해, 응용 프로그램의 요청에 따라 커널에 접근하기 위한 인터페이스

<br>

커널이 제공하는 시스템 자원 관련 서비스를 모아놓은 것이며 함수 형태로 제공된다.

응용프로그램이나 사용자가 운영체제를 통해 자원을 이용하기 위해서는 이 시스템 호출이라는 인터페이스를 통해 접근해야 한다.

(사용자 영역에서 실행되는) 프로그램이 I/O 작업을 수행하려면 운영체제의 커널에 허락을 구해야 한다. 여기서 시스템 호출이란 바로 프로그램이 그러한 허락을 구하기 위한 수단이다. 운영체제에 따라 디테일한 구현은 다를 수 있겠지만 기본적인 컨셉은 동일.

<br>

#### +) 커널

커널은 프로세스 관리, 메모리 관리, 저장장치 관리와 같은 운영체제의 핵심기능을 모아놓은 것으로, 자동차에 비유하면 엔진 같은 것이다.

커널 내부에는 시스템 호출과 드라이버가 있다.

<br>

### 시스템 콜이 필요한 이유

사용자 모드에서 사용이 불가능한 커널 기능을 사용하기 위해서는 시스템 콜을 통해 수행해야 한다.

<br>

#### +) 커널 모드와 유저 모드

운영체제는 **커널 모드(Kernal Mode)** 와 **사용자 모드(User Mode)**로 나뉘어 구동된다.

- 커널 모드(Kernal mode)
  - 특권 명령어 실행과 원하는 작업 수행을 위한 자원 접근을 가능케 하는 모드
  - OS가 사용 (CPU Protection ring Level 0 : 커널이 사용 , 1~2 : OS가 사용)
- 사용자 모드(User Mode)
  - 응용 프로그램이 사용(CPU Protection ring Level 3)

커널 모드에서 실행 가능한 기능들이 있다. <br>
=> e.g. 프로세스의 실행, 종료나 I/O 작업 등의 사용자가 함부로 사용하면 문제가 될 만한 작업들
<br>

커널 모드로 실행하려면, 반드시 API 내의 **시스템 콜**을 거쳐야 한다(응용 프로그램이 그 기능 사용 위해서는 시스템 콜을 사용하여 **커널 모드로 실행**해야 함)
<br>
시스템 콜은 운영체제가 제공한다.

<br>

### 시스템 콜의 세 가지 기능

1. 사용자 모드에 있는 응용 프로그램이 커널의 기능을 사용할 수 있도록 한다.
2. 시스템 호출을 하면 사용자 모드에서 커널 모드로 바뀐다.
3. 커널에서 시스템 호출을 처리하면 커널 모드에서 사용자 모드로 돌아가 작업을 계속한다.

<img src="https://camo.githubusercontent.com/5df294869a49102571d36d7a023cc9aafa1c219e950b97b8e32ef24c6f8cbd11/68747470733a2f2f6d656469612e766c70742e75732f696d616765732f6c65656a68333232342f706f73742f61313764633463302d333461302d346134622d393338322d6339316138383764393531382f746f7074616c2d626c6f672d696d6167652d313533343434393338373436352d33333665323539336534656164313264363038316434623832323632646263392e77656270">

####

<br>

#### 시스템 콜의 유형

예시들은 모두 Unix System Calls다

1. 프로세스 제어
   - e.g. `exec()`: 다른 프로그램의 실행
   - `fork()`: 새 프로세스의 생성
   - `wait()`: 자식 프로세스가 끝날 때까지 대기
2. 파일 조작
   - e.g. `open()`, `read()`, `write()` 등
3. 장치 관리
   - 장치의 부착, 분리
   - e.g. `ioctl()`, `read()`, `write()`
4. 정보 유지
   - 시간, 날짜의 설정
   - e.g. `getpid()`, `alarm()`, `sleep()`
5. 통신
   - 공유 메모리에서 다른 프로세스 소유 메모리 접근 시
   - e.g. `pipe()`, `shmget()`, `mmap()`

<br>

# 참고자료

🔗 https://velog.io/@woo0_hooo/%EA%B8%B0%EC%88%A0%EB%A9%B4%EC%A0%91%EB%8C%80%EB%B9%84-System-Call%EC%9D%B4%EB%9E%80

🔗 https://www.geeksforgeeks.org/introduction-of-system-call/
